<application guid="EAI_DEMO" version="1.0"><display name="EAI Demo" categories="Samples.Inventory" /><creation date="25-11-2005 12:00:00" authors="Admin" /><short-description>The documentation for this event process flow is available at {Fiorano Install
        Dir}/esb/samples/EventProcesses/EAIDemo/docs/readme.html.
    </short-description><deployment label="Development" /><service-instances><inst name="CRM"><service guid="CRM" version="4.0" /><long-description>CRM is a simulatorr for Clarify Management Adapter&#xd;
                Its output is a purchase order in xml format&#xd;
                Username and password can be set using custompropertysheet
            </long-description><execution><debug enabled="false" port="5000" /></execution><outputport-instances><outputport-instance name="OUT_PORT"><schema root="Order"><file>CRM.OUT_PORT.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms></outputport-instance><outputport-instance name="ON_EXCEPTION"><schema root="{http://www.fiorano.com/fesb/activity/fault}Error"><file>CRM.ON_EXCEPTION.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms><workflow type="1" datatype="2" /></outputport-instance></outputport-instances><logmanager logger="java.util.logging.FileHandler"><Param name="java.util.logging.FileHandler.limit">50000</Param><Param name="java.util.logging.FileHandler.dir">logs</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.dateformat">MM:dd:yyyy</Param><Param name="java.util.logging.FileHandler.count">4</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.includetimestamp">true</Param></logmanager><logmodules><logmodule name="CrmLog" /><logmodule name="CrmLog.Event" /><logmodule name="ERR_HANDLER" /><logmodule name="OUT_HANDLER" level="INFO" /></logmodules><runtime-arguments><runtime-argument name="JVM_PARAMS" mandatory="false" inmemory="false"><value>-DLOG_TO_STREAM=true</value></runtime-argument></runtime-arguments></inst><inst name="ERP"><service guid="erp" version="4.0" /><long-description>The ERP Service is a simulator for an ERP System&#xd;
                Input - Purchase Oreder in XML format&#xd;
                Output - Rejection or Acceptance of PO on respective ports
            </long-description><execution><debug enabled="false" port="5000" /><launch first-available-node="false" /></execution><inputport-instances><inputport-instance name="PO_IN"><schema root="Order"><file>CRM.OUT_PORT.xsd</file></schema><jms><destination /><authentication /><subscriber><transaction enabled="true" /><subscription durable="false" name="null" /></subscriber></jms></inputport-instance></inputport-instances><outputport-instances><outputport-instance name="PO_REJECT"><schema root="Order"><file>CRM.OUT_PORT.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms></outputport-instance><outputport-instance name="PO_ACCEPT"><schema root="Order"><file>CRM.OUT_PORT.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms></outputport-instance><outputport-instance name="ON_EXCEPTION"><schema root="{http://www.fiorano.com/fesb/activity/fault}Error"><file>ERP.ON_EXCEPTION.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms><workflow type="1" datatype="2" /></outputport-instance></outputport-instances><logmanager logger="java.util.logging.FileHandler"><Param name="java.util.logging.FileHandler.limit">50000</Param><Param name="java.util.logging.FileHandler.dir">logs</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.dateformat">MM:dd:yyyy</Param><Param name="java.util.logging.FileHandler.count">4</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.includetimestamp">true</Param></logmanager><logmodules><logmodule name="ErpLog" /><logmodule name="ErpLog.Event" /><logmodule name="ERR_HANDLER" /><logmodule name="OUT_HANDLER" level="INFO" /></logmodules><runtime-arguments><runtime-argument name="JVM_PARAMS" mandatory="false" inmemory="false"><value>-DLOG_TO_STREAM=true</value></runtime-argument></runtime-arguments></inst><inst name="Rejected_Orders"><service guid="Display" version="4.0" /><execution><debug enabled="false" port="5000" /><launch first-available-node="false" /></execution><inputport-instances><inputport-instance name="IN_PORT"><jms><destination /><authentication /><subscriber><transaction enabled="true" /><subscription durable="false" name="null" /></subscriber></jms></inputport-instance></inputport-instances><outputport-instances><outputport-instance name="OUT_PORT"><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms></outputport-instance><outputport-instance name="ON_EXCEPTION"><schema root="{http://www.fiorano.com/fesb/activity/fault}Error"><file>Rejected_Orders.ON_EXCEPTION.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms><workflow type="1" datatype="2" /></outputport-instance></outputport-instances><logmanager logger="java.util.logging.FileHandler"><Param name="java.util.logging.FileHandler.limit">50000</Param><Param name="java.util.logging.FileHandler.dir">logs</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.dateformat">MM:dd:yyyy</Param><Param name="java.util.logging.FileHandler.count">4</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.includetimestamp">true</Param></logmanager><logmodules><logmodule name="DisplayServiceInfo" /><logmodule name="ERR_HANDLER" /><logmodule name="OUT_HANDLER" level="INFO" /></logmodules><runtime-arguments><runtime-argument name="JVM_PARAMS" mandatory="false" inmemory="false"><value>-DLOG_TO_STREAM=true</value></runtime-argument></runtime-arguments></inst><inst name="SMTP_Bridge"><service guid="SMTP" version="4.0" /><resource-properties><resource-property name="Username">ayrton</resource-property><resource-property name="Mail Server Name">mailserver.fiorano.com</resource-property><resource-property name="Email ID">ayrton@fiorano.com</resource-property><resource-property name="Server Port">25</resource-property></resource-properties><execution><debug enabled="false" port="5000" /><launch first-available-node="false" /></execution><inputport-instances><inputport-instance name="IN_PORT"><schema root="{http://www.fiorano.com/fesb/activity/SMTP1/smtp/in}Email"><file>SMTP_Bridge.IN_PORT.xsd</file></schema><jms><destination /><authentication /><subscriber><transaction enabled="true" /><subscription durable="false" name="null" /></subscriber></jms></inputport-instance></inputport-instances><outputport-instances><outputport-instance name="OUT_PORT"><schema root="{http://www.fiorano.com/fesb/activity/SMTP1/smtp/out}SMTP"><file>SMTP_Bridge.OUT_PORT.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms></outputport-instance><outputport-instance name="ON_EXCEPTION"><schema root="{http://www.fiorano.com/fesb/activity/fault}Error"><file>SMTP_Bridge.ON_EXCEPTION.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms><workflow type="1" datatype="2" /></outputport-instance></outputport-instances><logmanager logger="java.util.logging.FileHandler"><Param name="java.util.logging.FileHandler.limit">50000</Param><Param name="java.util.logging.FileHandler.dir">logs</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.dateformat">MM:dd:yyyy</Param><Param name="java.util.logging.FileHandler.count">4</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.includetimestamp">true</Param></logmanager><logmodules><logmodule name="com.fiorano.bc.trgateway" /><logmodule name="com.fiorano.adapter.jca.smtp.cci.SMTPInteraction" /><logmodule name="SMTPManagedConnectionFactory" /><logmodule name="ERR_HANDLER" /><logmodule name="OUT_HANDLER" level="INFO" /></logmodules><runtime-arguments><runtime-argument name="JVM_PARAMS" mandatory="false" inmemory="false"><value>-DLOG_TO_STREAM=true</value></runtime-argument></runtime-arguments></inst><inst name="Xslt_Tranform"><service guid="Xslt" version="4.0" /><resource-properties><resource-property name="XSLT Engine">Xalan</resource-property></resource-properties><execution><debug enabled="false" port="5000" /><launch first-available-node="false" /></execution><inputport-instances><inputport-instance name="IN_PORT"><schema root="Order"><file>CRM.OUT_PORT.xsd</file></schema><jms><destination /><authentication /><subscriber><transaction enabled="true" /><subscription durable="false" name="null" /></subscriber></jms></inputport-instance></inputport-instances><outputport-instances><outputport-instance name="OUT_PORT"><schema root="{http://www.fiorano.com/fesb/activity/SMTP1/smtp/in}Email"><file>Xslt_Tranform.OUT_PORT.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms></outputport-instance><outputport-instance name="ON_EXCEPTION"><schema root="{http://www.fiorano.com/fesb/activity/fault}Error"><file>SMTP_Bridge.ON_EXCEPTION.xsd</file></schema><jms><destination /><authentication /><publisher><messages priority="4" /></publisher></jms><workflow type="1" datatype="2" /></outputport-instance></outputport-instances><logmanager logger="java.util.logging.FileHandler"><Param name="java.util.logging.FileHandler.limit">50000</Param><Param name="java.util.logging.FileHandler.dir">logs</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.dateformat">MM:dd:yyyy</Param><Param name="java.util.logging.FileHandler.count">4</Param><Param name="fiorano.jms.log2.def.DefaultFormatter.includetimestamp">true</Param></logmanager><logmodules><logmodule name="com.fiorano.bc.trgateway" /><logmodule name="com.fiorano.adapter.jca.xslt.cci.XsltInteraction" /><logmodule name="com.fiorano.adapter.jca.xslt.spi.outbound.XsltManagedConnectionFactory" /><logmodule name="com.fiorano.adapter.jca.xslt.cci.XsltInteractionSpec" /><logmodule name="ERR_HANDLER" /><logmodule name="OUT_HANDLER" level="INFO" /></logmodules><runtime-arguments><runtime-argument name="JVM_PARAMS" mandatory="false" inmemory="false"><value>-DLOG_TO_STREAM=true</value></runtime-argument></runtime-arguments></inst></service-instances><routes><route name="Rejection_Event"><source inst="ERP" port="PO_REJECT" /><target inst="Rejected_Orders" port="IN_PORT" /><messages /></route><route name="Acceptance_Event"><source inst="ERP" port="PO_ACCEPT" /><target inst="Xslt_Tranform" port="IN_PORT" /><messages /></route><route name="Mail_Event"><source inst="Xslt_Tranform" port="OUT_PORT" /><target inst="SMTP_Bridge" port="IN_PORT" /><messages /></route><route name="PO_Event"><source inst="CRM" port="OUT_PORT" /><target inst="ERP" port="PO_IN" /><messages /></route></routes><layout><![CDATA[<layout zoomFactor="100">
   <documentation>SCENARIO:
--------
      The EAI Demo event process is used to show a typical integration scenario, where 
a Purchase Order (PO) comes from a CRM Service to an ERP Service. The ERP Service sends 
out an Email to the concerned person if the Order is accepted, or sends out a rejection 
notice in case the PO is rejected.

RUNNING THE EVENT PROCESS:
-------------------------
1. Send a purchase order from the CRM Service.
2. The purchase order is received by the ERP Service. When the PO arrives, a popup 
   window appears showing that a PO has been received.
3. Close the popup window. On closing the popup window, another window pops up displaying 
   details of the PO. In that popup dialog, either accept or reject the PO.
4. On accepting the order, an acceptance mail will be sent to the person who sent the 
   PO via the CRM Service. The default user for this is Ayrton (ayrton@fiorano.com) 
5. On rejection, the details of the PO are shown on the Rejected Orders Display Service
</documentation>
   <service-instance name="CRM" position="40,177"/>
   <service-instance name="ERP" position="178,177"/>
   <service-instance name="Rejected_Orders" position="363,100"/>
   <service-instance name="SMTP_Bridge" position="516,281"/>
   <service-instance name="Xslt_Tranform" position="359,280"/>
   <route name="Rejection_Event" shape="0"/>
   <route name="Acceptance_Event" shape="0"/>
   <route name="Mail_Event" shape="0"/>
   <route name="PO_Event" shape="0"/>
   <group name="Send_Email" shortDescription="" longDescription="" color="-1644826" shape="1" expanded="true" position="435,269">
      <member type="service-instance" name="Xslt_Tranform"/>
      <member type="service-instance" name="SMTP_Bridge"/>
   </group>
</layout>]]></layout></application>